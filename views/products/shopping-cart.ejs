<% layout("layouts/boilerplate") -%>

<!--Flash messages-->
<% if(error && error.length > 0){ %>
<div id="flash" class="alert alert-danger col-md-6 col-md-offset-3" role="alert">
    <%= error %>
</div>
<% } %>
<% if(success && success.length > 0){ %>
<div id="flash" class="alert alert-success col-md-6 col-md-offset-3" role="alert">
    <%= success %>
</div>
<% } %>

<% if (products != null) { %>

<div class="row">
    <div class="col-sm-6 col-md-4 col-md-offset-3 call-sm-offset-3">
        <ul class="list-group">
            <!--Generate shopping cart content list-->
            <% products.forEach(function (product) { %>
            <li class="list-group-item">
                <span class="badge"><%= product.qty %></span>
                <strong><%= product.item.title %></strong>
                <span class="label label-success">$<%= product.price %></span>
                <div class="btn-group">
                    <button type="button" class="btn btn-primary btn-xs dropdown-toggle" data-toggle="dropdown">Action <span
                                class="caret"></span></button>
                    <ul class="dropdown-menu">
                        <li><a href="/reduce/<%= product.item._id %>">Reduce by 1</a></li>
                        <li><a href="/remove/<%= product.item._id %>">Remove All</a></li>
                    </ul>
                </div>
            </li>
            <% }) %>
        </ul>
    </div>
</div>

<% } %>

<% if (products == null) { %>

<div class="row">
    <div class="col-sm-6 col-md-4 col-md-offset-3 call-sm-offset-3">
        <h3>No items in your cart.</h3>
    </div>
</div>

<% } %>

<div class="row">
    <div class="col-sm-6 col-md-4 col-md-offset-3 call-sm-offset-3">
        <strong>Total: <% if(totalPrice) { %>$<%= totalPrice %><% } else { %>$0 <% } %></strong>
    </div>
</div>

<hr>

<div class="row">
    <div class="col-sm-6 col-md-4 col-md-offset-3 call-sm-offset-3">
        <a href="/checkout" type="button" class="btn btn-success">Checkout</a>
    </div>
</div>